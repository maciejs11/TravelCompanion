@model IEnumerable<Inzynierka.Models.Chat.Message>

@{ 
    ViewData["Title"] = "Home Page";
    var userName = User.Identity.Name;
}

<div class="jumbotron bg-light">
    <h2 class="text-center text-primary">
        Chat
    </h2>
     
    <div class="row">
        <div class=" col-md-12" id="chat">
            @if(Model != null)
            {
                @foreach(var message in Model.OrderBy (m => m.Date))
                {
                    string containerClass, timePosition, textAllign, contcolor, offset;
                    if(userName == message.UserName)
                    {
                        containerClass = "container darker";
                        timePosition = "time-right text-light";
                        textAllign = "text-right text white";
                        contcolor = "bg-prmiary";
                        offset = "col-md-6 offset-md-6";
                    }
                    else
                    {
                        containerClass = "container";
                        timePosition = "time-left";
                        textAllign = "text-left";
                        contcolor = "bg-light";
                        offset = "";
                    }
                    <div class="row">
                        <div class="@offset">
                            <div class="@containerClass @contcolor">
                                <p class="sender @textAllign">@message.UserName</p>
                                <p class="@textAllign">@message.Text</p>
                                <span class="@timePosition">@message.Date.ToString()</span>
                            </div>
                        </div>                    
                    </div>
                }
            }
        </div>
        <div class="col-md-12">
            <form asp-action="Create" asp-controller="Chat"
                   data-ajax-begin="clearInputField"></form>
        </div>
    </div>
</div>